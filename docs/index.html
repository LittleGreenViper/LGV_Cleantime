<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Index  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Index  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          NA Cleantime Calculation Engine Doumentation
        </a>
         (100% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/LittleGreenViper/LGV_Cleantime">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Index</a>
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeDateCalc.html">LGV_CleantimeDateCalc</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeDateCalc/CleanTimeEvent.html">– CleanTimeEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeDateCalc/Cleantime.html">– Cleantime</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeKeytagDescription.html">LGV_CleantimeKeytagDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeKeytagDescription/KeytagResourceNamesBody.html">– KeytagResourceNamesBody</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeKeytagDescription/KeytagResourceNamesText.html">– KeytagResourceNamesText</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/LGV_CleantimeKeytagDescription/KeytagIndexes.html">– KeytagIndexes</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='na-cleantime-calculation-engine' class='heading'>NA CLEANTIME CALCULATION ENGINE</h1>

<p><img src="https://github.com/LittleGreenViper/LGV_Cleantime/raw/master/icon.png" align="right" /></p>
<h2 id='introduction' class='heading'>INTRODUCTION</h2>

<p>This is the calculation &ldquo;engine&rdquo; for determining milestones in NA cleantime. It allows the implementor to determine important milestones in the lifelong endeavor of NA Recovery.</p>

<p>It&rsquo;s a native <a href="https://apple.com/swift">Swift</a> &ldquo;faceless&rdquo; engine module, meant to compile and link into an Apple application; regardless of platform.</p>
<h2 id='code-documentation' class='heading'>CODE DOCUMENTATION</h2>

<p><a href="https://littlegreenviper.github.io/LGV_Cleantime/">Detailed API documentation is available here.</a></p>
<h2 id='what-problem-does-this-solve' class='heading'>WHAT PROBLEM DOES THIS SOLVE?</h2>

<p>NA cleantime has a series of &ldquo;culturally significant&rdquo; milestones, recognized as members remain abstinent and practicing the NA program. These are:</p>

<ul>
<li>1 Day</li>
<li>30 Days</li>
<li>60 Days</li>
<li>90 Days</li>
<li>6 Months</li>
<li>9 Months</li>
<li>1 Year</li>
<li>18 Months (A Year and A Half)</li>
<li>2 Years</li>
<li>5 Years</li>
<li>10 Years</li>
<li>15 Years</li>
<li>20 Years</li>
<li>25 Years</li>
<li>10,000 Days (27.4 Years)</li>
<li>30 Years</li>
<li>40 Years</li>
</ul>

<p>This module will accept two dates (a &ldquo;cleandate,&rdquo; or the first day clean, and an &ldquo;ending&rdquo; day -usually today), and will calculate any and all milestones between those dates.</p>

<p>It will then report these, in a manner that does not prescribe the format of presentation, but does allow the presenter to determine an accurate reporting UI.</p>

<p>This will not work with starting dates earlier than Jan 1, 1950. Since NA started in 1953 (for our purposes), this is fine.</p>

<p>The algorithm is non-inclusive. It does not count the initial day. If the start date and end date are the same, zero days have passed.</p>

<p>The granularity of the algorithm is complete days. The start time and end time are assumed to be noon.</p>

<p>This uses <a href="https://en.wikipedia.org/wiki/Gregorian_calendar">the Gregorian calendar</a>.</p>
<h2 id='implementation' class='heading'>IMPLEMENTATION</h2>

<p>This is an Apple library, written in native <a href="https://apple.com/swift">Swift</a>. It is not designed for <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210">Objective-C</a> projects.</p>

<p>This will work for <a href="https://apple.com/ios">iOS</a>, <a href="https://apple.com/ipados">iPadOS</a>, <a href="https://apple.com/macos">MacOS</a>, <a href="https://apple.com/watchos">WatchOS</a>, and <a href="https://apple.com/tvos">tvOS</a>.</p>

<p>It relies only on the <a href="https://developer.apple.com/documentation/foundation">Swift Foundation Library</a>. It is designed for Swift 5.0 or above.</p>
<h3 id='installation' class='heading'>Installation</h3>
<h4 id='a-href-https-swift-org-package-manager-swift-package-manager-a' class='heading'><a href="https://swift.org/package-manager/">Swift Package Manager</a></h4>

<p>The recommended implementation is via the Swift Package Manager. The Git URI for this project is:</p>
<pre class="highlight plaintext"><code>git@github.com:LittleGreenViper/LGV_Cleantime.git
</code></pre>

<p>Once you have included the project, you import it, using this <code>import</code> statement:</p>
<pre class="highlight plaintext"><code>import LGV_Cleantime
</code></pre>
<h4 id='a-href-https-github-com-carthage-carthage-github-carthage-a' class='heading'><a href="https://github.com/Carthage/Carthage">GitHub Carthage</a></h4>

<p>You can add this project to yours by adding the following line to your <a href="https://github.com/Carthage/Carthage/blob/master/Documentation/Artifacts.md#cartfile">CartFile</a>:</p>
<pre class="highlight plaintext"><code>github "LittleGreenViper/LGV_Cleantime"
</code></pre>

<p>Once the module has been imported, you can either build the library, and import the module (as above), or you can directly add the files to your project, by going into the <code>Carthage/Checkouts/LGV_Cleantime/Sources/LGV_Cleantime</code> directory, and adding the two files, therein, to your project. Note that if you do this, you do not <code>import</code> the module.</p>
<h4 id='directly-from-github' class='heading'>Directly From GitHub</h4>

<p>You can also include the module as a <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">Git Submodule</a>, by referencing its Git URL: </p>
<pre class="highlight plaintext"><code>git@github.com:LittleGreenViper/LGV_Cleantime.git
</code></pre>
<h3 id='usage' class='heading'>Usage</h3>

<p>Once you have the module installed and imported, you use it very simply.</p>
<pre class="highlight plaintext"><code>// This is a simple utility function for creating dates from the Gregorian calendar.
func makeDate(year inYear: Int, month inMonth: Int, day inDay: Int) -&gt; Date { Calendar(identifier: .gregorian).date(from: DateComponents(year: inYear, month: inMonth, day: inDay)) ?? Date() }

// We make a couple of dates (the date range).
let startDate = makeDate(year: 1953, month: 10, day: 5)
let endDate = makeDate(year: 2021, month: 7, day: 17)
</code></pre>

<p>This creates an instance of the engine, given the two dates:</p>
<pre class="highlight plaintext"><code>let calculator = LGV_CleantimeDateCalc(startDate: startDate, endDate: endDate)
</code></pre>

<p>This creates an instance of the engine, given the two dates (in Gregorian), but specifying the Persian (Iranian) Solar Calendar as the calculation engine:</p>
<pre class="highlight plaintext"><code>let calculator = LGV_CleantimeDateCalc(startDate: startDate, endDate: endDate, calendar: Calendar(identifier: .persian))
</code></pre>

<p>You can &ldquo;mix and match&rdquo; calendars. <a href="https://github.com/LittleGreenViper/LGV_Cleantime/blob/529f1af050e86eec786bf0dd576c32ed77e35100/Tests/LGV_CleantimeTests/LGV_CleantimeCalculationTests.swift#L1170">This set of tests does that with the Persian Calendar.</a></p>

<p>This is the total number of complete days that have passed between the two dates:</p>
<pre class="highlight plaintext"><code>let totalDays = calculator.cleanTime.totalDays
</code></pre>

<p>This is the total number of complete months that have passed between the two dates:</p>
<pre class="highlight plaintext"><code>let totalMonths = calculator.cleanTime.totalMonths
</code></pre>

<p>This is the total number of complete years that have passed between the two dates:</p>
<pre class="highlight plaintext"><code>let years = calculator.cleanTime.years
</code></pre>

<p>This is the total number of complete months that have passed since the last complete year:</p>
<pre class="highlight plaintext"><code>let months = calculator.cleanTime.months
</code></pre>

<p>This is the total number of complete days that have passed since the last complete month, after the last complete year:</p>
<pre class="highlight plaintext"><code>let days = calculator.cleanTime.days
</code></pre>

<p>You may also use a directly-instantiated inline struct, like so:</p>
<pre class="highlight plaintext"><code>let totalDays = LGV_CleantimeDateCalc(startDate: startDate, endDate: makeDate(year: 2021, month: 7, day: 16)).cleanTime.totalDays
let totalMonths = LGV_CleantimeDateCalc(startDate: startDate, endDate: Date()).cleanTime.totalMonths
</code></pre>

<p>Note that you do not have to specify an end date. If you leave that out, &ldquo;today&rdquo; is assumed:</p>
<pre class="highlight plaintext"><code>let years = LGV_CleantimeDateCalc(startDate: startDate).cleanTime.years
let months = LGV_CleantimeDateCalc(startDate: startDate).cleanTime.months
let days = LGV_CleantimeDateCalc(startDate: startDate).cleanTime.months
</code></pre>

<p><code><a href="Structs/LGV_CleantimeDateCalc.html#/s:13LGV_Cleantime0a1_B8DateCalcV9cleanTimeAC0B0Vvp">LGV_CleantimeDateCalc.cleanTime</a></code> is the workhorse. That returns a struct with the calculation results. It has a number of accessors that return true, if the milestone is present within the timespan:</p>
<pre class="highlight plaintext"><code>LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isOneDayOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isThirtyDaysOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isSixtyDaysOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isNinetyDaysOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isSixMonthsOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isNineMonthsOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isOneYearOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isEighteenMonthsOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isTwoOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isFiveOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isTenOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isFifteenOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isTwentyOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isTwentyFiveOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isTenThousandDaysOrMore
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isThirtyOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isFortyOrMoreYears
LGV_CleantimeDateCalc(startDate: startDate).cleanTime.isFiftyOrMoreYears
</code></pre>

<p>You can also fetch a couple of <a href="https://developer.apple.com/documentation/foundation/date">Date</a> structures, directly from the instance:</p>
<pre class="highlight plaintext"><code>let components = LGV_CleantimeDateCalc(startDate: startDate).components
let timeInterval = LGV_CleantimeDateCalc(startDate: startDate).timeInterval
</code></pre>

<p>These will return values that will be directly useful for Date utilities.</p>

<p>And, finally, you can get &ldquo;milestones,&rdquo; based on the dates, with these computed properties:</p>

<p><a href="https://littlegreenviper.github.io/LGV_Cleantime/Structs/LGV_CleantimeDateCalc.html#/s:13LGV_Cleantime0a1_B8DateCalcV04lastB9MilestoneAC14CleanTimeEventOvp">   <code>LGV_CleantimeDateCalc(startDate: startDate).lastCleantimeMilestone</code></a>
<a href="https://littlegreenviper.github.io/LGV_Cleantime/Structs/LGV_CleantimeDateCalc.html#/s:13LGV_Cleantime0a1_B8DateCalcV010dateOfLastB9Milestone10Foundation0C0VSgvp">   <code>LGV_CleantimeDateCalc(startDate: startDate).dateOfLastCleantimeMilestone</code></a>
<a href="https://littlegreenviper.github.io/LGV_Cleantime/Structs/LGV_CleantimeDateCalc.html#/s:13LGV_Cleantime0a1_B8DateCalcV25dateOfLastAnnualMilestone10Foundation0C0VSgvp">   <code>LGV_CleantimeDateCalc(startDate: startDate).dateOfLastAnnualMilestone</code></a></p>

<p>And this method:</p>

<p><a href="https://littlegreenviper.github.io/LGV_Cleantime/Structs/LGV_CleantimeDateCalc.html#/s:13LGV_Cleantime0a1_B8DateCalcV010dateOfThisB9Milestoney10Foundation0C0VSgAC14CleanTimeEventOF">   <code>LGV_CleantimeDateCalc(startDate: startDate).dateOfThisCleantimeMilestone(_: CleanTimeEvent) -&gt; Date?</code></a></p>

<p>The first returns an enum, with the last &ldquo;milestone&rdquo; in the date range, and the second returns the actual date, upon which that milestone occurred.</p>
<h3 id='github-project' class='heading'>GitHub Project</h3>

<p>The GitHub project for this library is <a href="https://github.com/LittleGreenViper/LGV_Cleantime">https://github.com/LittleGreenViper/LGV_Cleantime</a>.</p>
<h2 id='license' class='heading'>LICENSE:</h2>
<h3 id='mit-license' class='heading'>MIT License</h3>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation
files (the &ldquo;Software&rdquo;), to deal in the Software without restriction, including without limitation the rights to use, copy,
modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &ldquo;AS IS&rdquo;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2 id='not-affiliated-with-a-href-https-na-org-na-world-services-inc-naws-a' class='heading'>NOT AFFILIATED WITH <a href="https://na.org">NA WORLD SERVICES, INC. (NAWS)</a></h2>

<p>This is an independent project, published by a single engineer, and claims no affiliation with NAWS, or any NA Service body or Group.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2025 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2025-01-21)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.15.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
